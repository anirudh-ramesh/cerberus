{% extends 'main.html' %}

{% block content %}

<!-- {% include 'status.html' %} -->

<div class="container-fluid">
  <h4 class="text-center alert alert info">User Data</h4>
  <div class="col-sm-12 m-3">

    {% if IsAdmin %}

    <a href="{% url 'user_management:demo' %}" class="btn btn-secondary btn-sm">Add-User</a>

    {% endif %}

    <a href="{% url 'home' %}" class="btn btn-info btn-sm">Home</a>
  </div>
  <form action="" method="GET">
    {% if user_data %}
    
    {% if messages %}
      {% for message in messages %}
      <div class="alert alert-{{message.tags}} mb-3">{{message}}</div>
      {% endfor %}
    {% endif %}
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">Username</th>
          <th scope="col">Email</th>
          <th scope="col">Contact</th>
          <!-- <th scope="col">Adhar-Proof</th> -->
          <!-- <th scope="col">Assigned-Vehicle</th> -->
          <th scope="col">Action</th>

        </tr>
      <tbody>
        {% for fm in user_data %}
        <tr>
          <td>{{fm.username}}</td>
          <td>{{fm.email}}</td>
          <td>{{fm.contact}}</td>
          <!-- <td>{{fmadhar_proof}}</td> -->
          <!-- <td><img src="{{fm.adhar_proof.url}}" alt="" class="card-img-top"></td> -->

            <td style="display: flex;">
              <a class="table-link" aria-expanded="false" href="{% url 'user_management:update' fm.email %}"><img src="../static/icons/edit.svg"></a>
              {% if IsAdmin %}

              <a class="table-link" aria-expanded="false" href="{% url 'user_management:delete' fm.email %}"><img src="../static/icons/delete.svg"></a>
              <a href="{% url 'getvehicle' %}?email={{fm.email}}" class="btn btn-secondary btn-sm">Assigned Vehicle</a>

              <a href="{% url 'uservehicle' fm.email %}" class="btn btn-primary btn-sm">User Vehicle</a>
              {% endif %}

          </td>
            
        </tr>

        {% endfor %}
      </tbody>
      </thead>
    </table>
    {% else %}
    <h4 class="text-center alert alert warning">No Records Found</h4>
    {% endif %}

  </form>

</div>


{% endblock %}