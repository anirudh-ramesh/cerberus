
<!DOCTYPE html>
<html>

<head>
  <title>Geofence</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta charset="utf-8">
  <style>
    #map {
      height: 80%;
    }
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <script type="text/javascript">
    var data = ("{{ geofencedata | escapejs }}");
    var coordinates = JSON.parse(data.replace(/'/g, '"'))
    function initMap() {
      var map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: {
          lat: coordinates[0]['lat'], lng: coordinates[0]['lng']
        }
      });

      if (coordinates.length == 1){
        var marker = new google.maps.Marker({
              position: {lat : coordinates[0]['lat'] , lng:coordinates[0]['lng'] },
              map : map
      })
        marker.setMap(map);
      }
      const triangleCoords = JSON.parse(data.replace(/'/g, '"'))

      const bermudaTriangle = new google.maps.Polygon({
        paths: triangleCoords,
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: "#FF0000",
        fillOpacity: 0.35,
      });
      bermudaTriangle.setMap(map);
    }
  </script>
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBqY1ZuIisvFmyKR3fAx6DVrkAsAZR1CM4&libraries=drawing&callback=initMap">
  </script>

  <div class="text-center mt-3">
    <a class="btn btn-secondary" href="{% url 'listgeofencedata' %}">Back</a>
  </div>
  
</body>
</html>