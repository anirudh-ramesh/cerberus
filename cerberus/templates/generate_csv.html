{% extends 'main.html' %}

{% block content %}

        <!-- <form action="" method="POST"> -->
          <!-- {% csrf_token %} -->
          <div class="csv-report">
            <h4><b>GENERATE CSV</b></h4>
            <div class="input-group mb-2">
              <div class="input-group-append">
                <label>Voltage</label>
                <input class="form-check-input" id="voltage" type="checkbox" checked="checked" value="test" name="configuration">
              </div>
            </div>
            <div class="input-group mb-2">
              <div class="input-group-append">
                <label>Battery Serial Number</label>
                <input class="form-check-input"  id="battery_serial_num" name='battery_serial_num' type="checkbox" checked="checked" >
              </div>
            </div>
            
            <div class="d-flex justify-content-center mt-3 login_container">
              <input class="btn btn-success"  id="demo222" type="submit">
              <div style="margin-left: 5%;">
                <a href="{% url 'home' %}" class="btn btn-info">Back</a>
              </div>
            </div>
          </div>
        <!-- </form>       -->
<script>
  
  let object=document.getElementById('demo222')
  object.addEventListener("click", function(){
    let selectfield="";
    let voltage=document.getElementById("voltage")
    let battery_serial_num=document.getElementById("battery_serial_num")
    
    if(voltage.checked){
      selectfield=selectfield?selectfield+"@=configuration":"configuration"
    }

    if(battery_serial_num.checked){
      selectfield=selectfield?selectfield+"@=vehicle_model_name":"vehicle_model_name"
    }
    window.location=`http://localhost:8000/export_to_csv?selectfield=${selectfield}`
  });

</script>


{% endblock %}